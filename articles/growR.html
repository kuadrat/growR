<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="growR">
<title>Tutorial • growR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tutorial">
<meta property="og:description" content="growR">
<meta property="og:image" content="https://kuadrat.github.io/growR/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">growR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/growR.html">Get started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../articles/calibration.html">Calibration</a>
    <a class="external-link dropdown-item" href="https://github.com/kuadrat/growR/tree/master/vignettes/figs/calibration_in_depth.pdf">Calibration - In depth</a>
    <a class="dropdown-item" href="../articles/parameter_descriptions.html">Parameter Descriptions</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/kuadrat/growR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Tutorial</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/kuadrat/growR/blob/HEAD/vignettes/growR.Rmd" class="external-link"><code>vignettes/growR.Rmd</code></a></small>
      <div class="d-none name"><code>growR.Rmd</code></div>
    </div>

    
    
<p><code>growR</code> implements the grassland growth model ModVege. The
basis of the model is thoroughly described by <span class="citation">(Jouven, Carrère, and Baumont 2006)</span>.</p>
<p>In short, ModVege takes values relating to daily weather conditions,
the nutrition availability and water holding capabilities as well as the
prevailing functional composition of plant population of the simulated
site as inputs and uses them to simulate grass growth on a daily time
step.</p>
<p>Functions and data provided by <code>growR</code> allow users to</p>
<ul>
<li>run grass growth simulations with ModVege,</li>
<li>calibrate site and model parameters on the basis of reference
data,</li>
<li>carry out basic analysis into model outputs and performance.</li>
</ul>
<p>The following section provides a step-by-step tutorial intended to
show how <code>growR</code> can be used. Deeper insights can be gained
by the <code><a href="../articles/parameter_descriptions.html">vignette("parameter_descriptions")</a></code>.</p>
<div class="section level2">
<h2 id="step-0-goal-of-the-tutorial">Step 0: Goal of the tutorial<a class="anchor" aria-label="anchor" href="#step-0-goal-of-the-tutorial"></a>
</h2>
<p>In this tutorial we are going to make use of the example input and
reference datasets to go through the whole process of</p>
<ol style="list-style-type: decimal">
<li>setting up all input files</li>
<li>running ModVege simulations with the specified inputs</li>
<li>have a look at the results</li>
<li>change inputs and run a new simulation</li>
</ol>
<p>Since quite a number of input files are required to even get started
with <code>growR</code>, the package ships with example files for each
of them. When following the tutorial, the reader will have an
opportunity to inspect all of them and can use those as templates in
order to create their own simulations with their own data.</p>
<p>When running simulations, data is loaded from and written to files.
In the following, we assume that we are working in an empty directory of
the filesystem and that this is the working directory for the running
<code>R</code> sessions or <code>Rscript</code> commands. To be on the
safe side, for this tutorial we will create a temporary directory
<code>working_dir</code>. All necessary or created files are assumed to
be located under this working directory.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">working_dir</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"growR_tutorial"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">working_dir</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="va">working_dir</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-1-setting-up-all-input-files">Step 1: Setting up all input files<a class="anchor" aria-label="anchor" href="#step-1-setting-up-all-input-files"></a>
</h2>
<p>To help users having a somewhat clean directory structure, the
function <code><a href="../reference/setup_directory.html">setup_directory()</a></code> is provided. It also offers the
option to copy all example files from the package directory into
appropriate location in the newly created directory structure. Our first
step is therefore to execute the following from an <code>R</code>
session:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/kuadrat/growR" class="external-link">growR</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; +---------------------------------+</span></span>
<span><span class="co">#&gt; | Welcome to growR Version 1.2.0! |</span></span>
<span><span class="co">#&gt; +---------------------------------+</span></span>
<span><span class="co"># Check that working directory is correct</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">working_dir</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/tmp/RtmpfqY7PP/growR_tutorial"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/tmp/RtmpfqY7PP/growR_tutorial"</span></span>
<span><span class="fu"><a href="../reference/setup_directory.html">setup_directory</a></span><span class="op">(</span><span class="va">working_dir</span>, force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [INFO]Initialized directory structure in `/tmp/RtmpfqY7PP/growR_tutorial`.</span></span>
<span><span class="co">#&gt; [INFO]Copying `/home/runner/work/_temp/Library/growR/extdata/posieux_weather.txt` to `/tmp/RtmpfqY7PP/growR_tutorial/input/`.</span></span>
<span><span class="co">#&gt; [INFO]Copying `/home/runner/work/_temp/Library/growR/extdata/posieux_parameters.csv` to `/tmp/RtmpfqY7PP/growR_tutorial/input/`.</span></span>
<span><span class="co">#&gt; [INFO]Copying `/home/runner/work/_temp/Library/growR/extdata/posieux_management1.txt` to `/tmp/RtmpfqY7PP/growR_tutorial/input/`.</span></span>
<span><span class="co">#&gt; [INFO]Copying `/home/runner/work/_temp/Library/growR/extdata/posieux_management2.txt` to `/tmp/RtmpfqY7PP/growR_tutorial/input/`.</span></span>
<span><span class="co">#&gt; [INFO]Copying `/home/runner/work/_temp/Library/growR/extdata/sorens_weather.txt` to `/tmp/RtmpfqY7PP/growR_tutorial/input/`.</span></span>
<span><span class="co">#&gt; [INFO]Copying `/home/runner/work/_temp/Library/growR/extdata/sorens_parameters.csv` to `/tmp/RtmpfqY7PP/growR_tutorial/input/`.</span></span>
<span><span class="co">#&gt; [INFO]Copying `/home/runner/work/_temp/Library/growR/extdata/sorens_management1.txt` to `/tmp/RtmpfqY7PP/growR_tutorial/input/`.</span></span>
<span><span class="co">#&gt; [INFO]Copying `/home/runner/work/_temp/Library/growR/extdata/sorens_management2.txt` to `/tmp/RtmpfqY7PP/growR_tutorial/input/`.</span></span>
<span><span class="co">#&gt; [INFO]Copying `/home/runner/work/_temp/Library/growR/extdata/posieux1.csv` to `/tmp/RtmpfqY7PP/growR_tutorial/data/`.</span></span>
<span><span class="co">#&gt; [INFO]Copying `/home/runner/work/_temp/Library/growR/extdata/posieux2.csv` to `/tmp/RtmpfqY7PP/growR_tutorial/data/`.</span></span>
<span><span class="co">#&gt; [INFO]Copying `/home/runner/work/_temp/Library/growR/extdata/sorens1.csv` to `/tmp/RtmpfqY7PP/growR_tutorial/data/`.</span></span>
<span><span class="co">#&gt; [INFO]Copying `/home/runner/work/_temp/Library/growR/extdata/sorens2.csv` to `/tmp/RtmpfqY7PP/growR_tutorial/data/`.</span></span>
<span><span class="co">#&gt; [INFO]Copying `/home/runner/work/_temp/Library/growR/extdata/example_config.txt` to `/tmp/RtmpfqY7PP/growR_tutorial`.</span></span>
<span><span class="co">#&gt; [INFO]Copied example files to respective directories.</span></span></code></pre></div>
<p>We used <code>force = TRUE</code> here such that we can skip the
safety prompt which would otherwise ask for confirmation.</p>
<p>Afterwards, check the working directory. You should find a couple of
subdirectories and some files:</p>
<ul>
<li>
<code>output</code> This is where generated output will be written
to, by default</li>
<li>
<code>input</code> Inputs to the simulation, such as weather and
management data are stored here.</li>
<li>
<code>data</code> Experimentally measured, real world data comes
here.</li>
</ul>
<p>First, we’ll have a look at <code>example_config.txt</code>. We are
later going to adjust and make use of this file for running our
simulation in this tutorial. It contains information about the types of
simulation we want to run and what input files should be used for each
simulation. Have a look at its structure and compare it to the
explanations given in the documentation of
<code><a href="../reference/read_config.html">read_config()</a></code>.</p>
<p>As you can infer, in order to completely run a simulation, we require
at least a parameter and a weather data file (the management file is
optional). <code>growR</code> comes with example data for two real-world
experimental sites: Sorens and Posieux, both in Switzerland. You can
find the respective example parameter files at
<code>input/sorens_parameters.csv</code> and
<code>input/posieux_parameters.csv</code>. Likewise for the
<code>input/..._weather.txt</code> and
<code>input/..._management1/2.txt</code> files. Again, have a look at
these files and the respective descriptions in <code>WeatherData</code>
and <code>ManagementData</code> to familiarize yourself with the
required data structures and the meaning of the different columns.</p>
</div>
<div class="section level2">
<h2 id="run-modvege-with-the-example-configuration">2. Run ModVege with the example configuration<a class="anchor" aria-label="anchor" href="#run-modvege-with-the-example-configuration"></a>
</h2>
<p>Everything is now set up for us and we are ready to proceed with a
simulation. Run:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">environments</span> <span class="op">=</span> <span class="fu"><a href="../reference/read_config.html">read_config</a></span><span class="op">(</span><span class="st">"example_config.txt"</span><span class="op">)</span></span></code></pre></div>
<p>As you may have already seen from the documentation of
<code><a href="../reference/read_config.html">read_config()</a></code>, this reads in the given configuration file,
skipping any lines starting with <code>#</code>. For each line, it then
looks for the given input files and creates a
<code>ModvegeEnvironment</code> object with the data from the
corresponding files. These <code>ModvegeEnvironment</code>s are
essentially data structures that hold all the information needed in
order to run a ModVege simulation.</p>
<p>We are now ready to do so:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">=</span> <span class="fu"><a href="../reference/growR_run_loop.html">growR_run_loop</a></span><span class="op">(</span><span class="va">environments</span>, </span>
<span>                         output_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">working_dir</span>, <span class="st">"output"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [INFO]Starting run 1 out of 2.</span></span>
<span><span class="co">#&gt; [INFO][Run 1/2]Simulating year 2013 (1/3)</span></span>
<span><span class="co">#&gt; [INFO][Run 1/2]Simulating year 2014 (2/3)</span></span>
<span><span class="co">#&gt; [INFO][Run 1/2]Simulating year 2015 (3/3)</span></span>
<span><span class="co">#&gt; [INFO]Starting run 2 out of 2.</span></span>
<span><span class="co">#&gt; [INFO][Run 2/2]Simulating year 2013 (1/3)</span></span>
<span><span class="co">#&gt; [INFO][Run 2/2]Simulating year 2014 (2/3)</span></span>
<span><span class="co">#&gt; [INFO][Run 2/2]Simulating year 2015 (3/3)</span></span>
<span><span class="co">#&gt; [INFO]All runs completed.</span></span></code></pre></div>
<p>This will simulate grass growth for every year in every environment
present in <code>environments</code>. After some console output, we now
have the results of these runs in the list <code>results</code>. Check
the documentation of <code><a href="../reference/growR_run_loop.html">growR_run_loop()</a></code> ro see how this list
is organized.</p>
<p>Furthermore, the default value for <code>write_files</code> in
<code><a href="../reference/growR_run_loop.html">growR_run_loop()</a></code> is <code>TRUE</code>. This means that the
results have also been written to files in the <code>output</code>
directory.</p>
</div>
<div class="section level2">
<h2 id="have-a-look-at-the-results">3. Have a look at the results<a class="anchor" aria-label="anchor" href="#have-a-look-at-the-results"></a>
</h2>
<p>Since we have the simulation results at our fingertips in our
interactive <code>R</code> sessions, the quickest way to inspect them is
through the <code>results</code> list. The output of</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Just print the first years of the first run (i.e. year 2013 at site Sorens)</span></span>
<span><span class="va">results</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; &lt;ModvegeSite&gt;</span></span>
<span><span class="co">#&gt;   Public:</span></span>
<span><span class="co">#&gt;     ABSDR: 0</span></span>
<span><span class="co">#&gt;     ABSDV: 0</span></span>
<span><span class="co">#&gt;     AET: 0.425137788528002 0.4583695833186 0.514875174072729 0.59 ...</span></span>
<span><span class="co">#&gt;     AgeDR: 502.41 502.7 502.7 505.98 510.39 512.89 512.89 514.12 51 ...</span></span>
<span><span class="co">#&gt;     AgeDRp: 3059.75216179612</span></span>
<span><span class="co">#&gt;     AgeDV: 502.41 502.7 502.7 505.98 510.39 512.89 512.89 514.12 51 ...</span></span>
<span><span class="co">#&gt;     AgeDVp: 386.16446805472</span></span>
<span><span class="co">#&gt;     AgeGR: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0  ...</span></span>
<span><span class="co">#&gt;     AgeGRp: 2295.17765333274</span></span>
<span><span class="co">#&gt;     AgeGV: 102.41 102.7 102.7 105.98 110.39 112.89 112.89 114.12 11 ...</span></span>
<span><span class="co">#&gt;     AgeGVp: 370.305479244779</span></span>
<span><span class="co">#&gt;     BM: 747.7587 747.490907997 747.490907997 744.464666239853 74 ...</span></span>
<span><span class="co">#&gt;     BM_after_cut: 1070</span></span>
<span><span class="co">#&gt;     BMDR: 29.9277 29.919020967 29.919020967 29.8208865782282 29.68 ...</span></span>
<span><span class="co">#&gt;     BMDRp: 0.500130124356253</span></span>
<span><span class="co">#&gt;     BMDV: 297.831 297.57188703 297.57188703 294.643779661625 290.7 ...</span></span>
<span><span class="co">#&gt;     BMDVp: 282.480008175896</span></span>
<span><span class="co">#&gt;     BMG: 420 420 420 420 420 420 420 420 420 420 420 420 420 420  ...</span></span>
<span><span class="co">#&gt;     BMGR: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0  ...</span></span>
<span><span class="co">#&gt;     BMGRp: 140</span></span>
<span><span class="co">#&gt;     BMGV: 420 420 420 420 420 420 420 420 420 420 420 420 420 420  ...</span></span>
<span><span class="co">#&gt;     BMGVp: 491.438768295548</span></span>
<span><span class="co">#&gt;     cBM: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0  ...</span></span>
<span><span class="co">#&gt;     cBMp: 7844.84187034734</span></span>
<span><span class="co">#&gt;     clone: function (deep = FALSE) </span></span>
<span><span class="co">#&gt;     cut_delays: 0</span></span>
<span><span class="co">#&gt;     cut_DOYs: 106 134 162 190 218 246 274 302</span></span>
<span><span class="co">#&gt;     cut_during_growth_preriod: TRUE</span></span>
<span><span class="co">#&gt;     cut_height: 0.05</span></span>
<span><span class="co">#&gt;     days_per_year: 365</span></span>
<span><span class="co">#&gt;     dBM: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0  ...</span></span>
<span><span class="co">#&gt;     determine_cut: function (DOY) </span></span>
<span><span class="co">#&gt;     determine_cut_automatically: function (DOY) </span></span>
<span><span class="co">#&gt;     determine_cut_from_input: function (DOY) </span></span>
<span><span class="co">#&gt;     dry_days_after_cut: 2</span></span>
<span><span class="co">#&gt;     dry_days_before_cut: 1</span></span>
<span><span class="co">#&gt;     dry_precipitation_limit: 1</span></span>
<span><span class="co">#&gt;     dry_window: NULL</span></span>
<span><span class="co">#&gt;     end_of_cutting_season: NULL</span></span>
<span><span class="co">#&gt;     ENV: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0  ...</span></span>
<span><span class="co">#&gt;     ENVfPAR: 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1  ...</span></span>
<span><span class="co">#&gt;     ENVfT: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0  ...</span></span>
<span><span class="co">#&gt;     ENVfW: 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1  ...</span></span>
<span><span class="co">#&gt;     get_management: function () </span></span>
<span><span class="co">#&gt;     get_target_biomass: function (DOY, intensity = "high") </span></span>
<span><span class="co">#&gt;     get_weather: function () </span></span>
<span><span class="co">#&gt;     GRO: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0  ...</span></span>
<span><span class="co">#&gt;     GROGR: 0</span></span>
<span><span class="co">#&gt;     GROGV: 0</span></span>
<span><span class="co">#&gt;     hvBM: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0  ...</span></span>
<span><span class="co">#&gt;     initialize: function (parameters, site_name = "-", run_name = "-") </span></span>
<span><span class="co">#&gt;     j_start_of_growing_season: 99</span></span>
<span><span class="co">#&gt;     LAI: 0.811104 0.811104 0.811104 0.811104 0.811104 0.811104 0. ...</span></span>
<span><span class="co">#&gt;     LAIGV: 0.811104 0.811104 0.811104 0.811104 0.811104 0.811104 0. ...</span></span>
<span><span class="co">#&gt;     last_DOY_for_initial_cut: 150</span></span>
<span><span class="co">#&gt;     management: list</span></span>
<span><span class="co">#&gt;     max_cut_delay: 5</span></span>
<span><span class="co">#&gt;     max_cut_period: 55</span></span>
<span><span class="co">#&gt;     n_state_variables: 31</span></span>
<span><span class="co">#&gt;     OMD: 0.677537527475466 0.677569768025088 0.677569768025088 0. ...</span></span>
<span><span class="co">#&gt;     OMDDR: 0.4 0.4 0.4 0.4 0.4 0.4 0.4 0.4 0.4 0.4 0.4 0.4 0.4 0.4  ...</span></span>
<span><span class="co">#&gt;     OMDDV: 0.45 0.45 0.45 0.45 0.45 0.45 0.45 0.45 0.45 0.45 0.45 0 ...</span></span>
<span><span class="co">#&gt;     OMDG: 0.858665597014925 0.858576865671642 0.858576865671642 0. ...</span></span>
<span><span class="co">#&gt;     OMDGR: 0.89 0.89 0.89 0.89 0.89 0.89 0.89 0.89 0.89 0.89 0.89 0 ...</span></span>
<span><span class="co">#&gt;     OMDGV: 0.858665597014925 0.858576865671642 0.858576865671642 0. ...</span></span>
<span><span class="co">#&gt;     parameters: ModvegeParameters, R6</span></span>
<span><span class="co">#&gt;     PGRO: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0  ...</span></span>
<span><span class="co">#&gt;     plot: function (...) </span></span>
<span><span class="co">#&gt;     plot_bm: function (smooth_interval = 28, ...) </span></span>
<span><span class="co">#&gt;     plot_growth: function (...) </span></span>
<span><span class="co">#&gt;     plot_limitations: function (...) </span></span>
<span><span class="co">#&gt;     plot_var: function (var, ...) </span></span>
<span><span class="co">#&gt;     plot_water: function (...) </span></span>
<span><span class="co">#&gt;     REP: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0  ...</span></span>
<span><span class="co">#&gt;     run: function (year, weather, management) </span></span>
<span><span class="co">#&gt;     run_name: -</span></span>
<span><span class="co">#&gt;     SENGR: 0</span></span>
<span><span class="co">#&gt;     SENGV: 0</span></span>
<span><span class="co">#&gt;     set_parameters: function (params) </span></span>
<span><span class="co">#&gt;     site_name: sorens1</span></span>
<span><span class="co">#&gt;     ST: 2.41 2.7 2.7 5.98 10.39 12.89 12.89 14.12 14.12 14.93 16 ...</span></span>
<span><span class="co">#&gt;     state_variable_names: AgeGV AgeGR AgeDV AgeDR BMGV BMGR BMDV BMDR OMDGV OMDGR  ...</span></span>
<span><span class="co">#&gt;     STp: 3005.38</span></span>
<span><span class="co">#&gt;     stubble_heigt: 0.05</span></span>
<span><span class="co">#&gt;     target_biomass: NULL</span></span>
<span><span class="co">#&gt;     time_step: 1</span></span>
<span><span class="co">#&gt;     version: package_version, numeric_version</span></span>
<span><span class="co">#&gt;     weather: list</span></span>
<span><span class="co">#&gt;     WR: 160 159.600913343104 159.873592083394 159.849885542053 1 ...</span></span>
<span><span class="co">#&gt;     write_output: function (filename, force = FALSE) </span></span>
<span><span class="co">#&gt;     WRp: 159.800708876818</span></span>
<span><span class="co">#&gt;     year: 2013</span></span>
<span><span class="co">#&gt;   Private:</span></span>
<span><span class="co">#&gt;     apply_cuts: function () </span></span>
<span><span class="co">#&gt;     calculate_ageing: function () </span></span>
<span><span class="co">#&gt;     calculate_digestibility: function () </span></span>
<span><span class="co">#&gt;     calculate_growth: function () </span></span>
<span><span class="co">#&gt;     carry_over_from_last_day: function () </span></span>
<span><span class="co">#&gt;     check_if_simulation_has_run: function () </span></span>
<span><span class="co">#&gt;     current_DOY: 365</span></span>
<span><span class="co">#&gt;     get_start_of_growing_season: function (critical_temperature = 5, min_window_temperature = 6, </span></span>
<span><span class="co">#&gt;     initialize_state_variables: function () </span></span>
<span><span class="co">#&gt;     make_header: function () </span></span>
<span><span class="co">#&gt;     REP_ON: 0.653846153846154</span></span>
<span><span class="co">#&gt;     update_biomass: function () </span></span>
<span><span class="co">#&gt;     vars_to_exclude: OMDDV OMDDR</span></span>
<span><span class="co">#&gt;     ylabels: list</span></span></code></pre></div>
<p>might be a little overwhelming and not very helpful, though. A
convenient way to quickly see what has happened is to plot the resulting
grass growth curves. The <code>ModvegeSite</code> objects which are
actually what’s stored in <code>results</code> provide a simple means of
doing that through their <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> method.</p>
<p>For example, to see the growth curves for year 2013 at site Sorens we
could do:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="growR_files/figure-html/plot_results-1.png" width="768">
The blue vertical lines in the top left plot indicate cutting events.
They should coincide with the steps in the harvested biomass
<code>hvBM</code>, bottom right plot.</p>
<p>Excellent! You have run your first ModVege simulation with
<code>growR</code>!</p>
</div>
<div class="section level2">
<h2 id="change-inputs-and-run-a-different-simulation">4. Change inputs and run a different simulation<a class="anchor" aria-label="anchor" href="#change-inputs-and-run-a-different-simulation"></a>
</h2>
<p>Now, for the sake of the example, let’s say that you want to check
what the simulation would look like if both sides had a significantly
lower nutritional index <code>NI</code>. First, check the current values
of <code>NI</code> in the differnet parameter files
(<code>input/sorens_parameters.csv</code> and
<code>input/posieux_parameters.csv</code>). They should be 0.7 for both
sites.</p>
<p>We want to investigate what the growth curves look like for different
values of NI. For that purpose, we’ll focus only on the site Sorens and
only on the year 2013 (just to keep the calculations required for the
example quick).</p>
<p>One way to supply different parameters to the simulation, is by
providing different parameter files. Copy
<code>sorens_parameters.csv</code> twice and call the copies something
like <code>sorens_parameters_lowNI.csv</code> and
<code>sorens_parameters_highNI.csv</code>. In one of the files, change
the value of NI to 0.5 and in the other, change it to 1.0.</p>
<p>Then, copy the <code>example_config.txt</code> file, give it a name
of your choice (we’ll use <code>NI_screening.txt</code> here) and edit
it such that there are only three uncommented lines. All of them should
use <em>site name</em> sorens1 and only the year 2013. One of them
should use the original <code>sorens_parameters.csv</code> file while
the others should use the newly written parameter files with higher and
lower <code>NI</code> values respectively. Since we now specify several
runs with the same <em>site name</em>, we need to distinguish them by
giving at least two of them a distinct <em>run name</em> as well.</p>
<p>When done, your new config file might look something like this:</p>
<pre><code># site name     # run name  # year(s)   # param file            # weather data          # cut dates
sorens1     -   2013    sorens_parameters.csv   sorens_weather.txt      sorens_management1.txt
sorens1     lowNI   2013    sorens_parameters_lowNI.csv sorens_weather.txt      sorens_management1.txt
sorens1     highNI      2013    sorens_parameters_highNI.csv    sorens_weather.txt      sorens_management1.txt</code></pre>
<p>Be sure that the spelling of your file names is correct and
consistent and that all the files reside in the correct locations
(i.e. the <code>input</code> directory under our working directory).</p>
<p>If all seems fine, go for it (use the name of the config file you
chose):</p>
<pre><code><span><span class="va">new_envs</span> <span class="op">=</span> <span class="fu"><a href="../reference/read_config.html">read_config</a></span><span class="op">(</span><span class="st">"NI_screening.txt"</span><span class="op">)</span></span></code></pre>
<p>And we’re ready to run and inspect our next run of simulations:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_results</span> <span class="op">=</span> <span class="fu"><a href="../reference/growR_run_loop.html">growR_run_loop</a></span><span class="op">(</span><span class="va">new_envs</span><span class="op">)</span></span>
<span><span class="co">#&gt; [INFO]Starting run 1 out of 3.</span></span>
<span><span class="co">#&gt; [INFO][Run 1/3]Simulating year 2013 (1/1)</span></span>
<span><span class="co">#&gt; [INFO]Starting run 2 out of 3.</span></span>
<span><span class="co">#&gt; [INFO][Run 2/3]Simulating year 2013 (1/1)</span></span>
<span><span class="co">#&gt; [INFO]Starting run 3 out of 3.</span></span>
<span><span class="co">#&gt; [INFO][Run 3/3]Simulating year 2013 (1/1)</span></span>
<span><span class="co">#&gt; [INFO]All runs completed.</span></span>
<span><span class="co"># Plot all results</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">run</span> <span class="kw">in</span> <span class="va">new_results</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">run</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">parameters</span><span class="op">$</span><span class="va">NI</span><span class="op">)</span></span>
<span>  <span class="va">run</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="fu">plot</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; [1] 0.7</span></span></code></pre></div>
<p><img src="growR_files/figure-html/ni_screening-1.png" width="768"></p>
<pre><code><span><span class="co">#&gt; [1] 0.5</span></span></code></pre>
<p><img src="growR_files/figure-html/ni_screening-2.png" width="768"></p>
<pre><code><span><span class="co">#&gt; [1] 1</span></span></code></pre>
<p><img src="growR_files/figure-html/ni_screening-3.png" width="768"></p>
<p>We can see how <code>NI</code> affects the total biomass production:
larger <code>NI</code> leads to proportionally larger <code>cBM</code>
and <code>hvBM</code> by the end of the season.</p>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-jouven2006ModelPredictingDynamics" class="csl-entry">
Jouven, M., P. Carrère, and R. Baumont. 2006. <span>“Model Predicting
Dynamics of Biomass, Structure and Digestibility of Herbage in Managed
Permanent Pastures. 1. <span>Model</span> Description.”</span> <em>Grass
and Forage Science</em> 61 (2): 112–24. <a href="https://doi.org/10.1111/j.1365-2494.2006.00515.x" class="external-link">https://doi.org/10.1111/j.1365-2494.2006.00515.x</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Kevin Kramer.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
